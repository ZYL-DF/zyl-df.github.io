<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>数据库系统原理 期末复习（一） | Ichirinko's Blog</title><meta name="keywords" content="数据库系统原理"><meta name="author" content="Ichirinko"><meta name="copyright" content="Ichirinko"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="数据库系统原理 概述-关系代数-SQL语句">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库系统原理 期末复习（一）">
<meta property="og:url" content="https://ichirinko.top/2023/12/28/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/index.html">
<meta property="og:site_name" content="Ichirinko&#39;s Blog">
<meta property="og:description" content="数据库系统原理 概述-关系代数-SQL语句">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Opera_System/202312300009566.png">
<meta property="article:published_time" content="2023-12-27T16:00:00.000Z">
<meta property="article:modified_time" content="2023-12-27T16:00:00.000Z">
<meta property="article:author" content="Ichirinko">
<meta property="article:tag" content="数据库系统原理">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Opera_System/202312300009566.png"><link rel="shortcut icon" href="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/202301142337679.png"><link rel="canonical" href="https://ichirinko.top/2023/12/28/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '数据库系统原理 期末复习（一）',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-28 00:00:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/img/202209122110798.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">32</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 开盒</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/ComputerNetwork/4/202310202339949.jpeg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Ichirinko's Blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 开盒</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">数据库系统原理 期末复习（一）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-12-27T16:00:00.000Z" title="发表于 2023-12-28 00:00:00">2023-12-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-12-27T16:00:00.000Z" title="更新于 2023-12-28 00:00:00">2023-12-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>13分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="数据库系统原理 期末复习（一）"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="第一章"><a class="header-anchor" href="#第一章">¶</a>第一章</h2>
<h3 id="绪论"><a class="header-anchor" href="#绪论">¶</a>绪论</h3>
<p>数据库是用来有效管理数据的工具</p>
<p>文件系统从一定程度上没有屏蔽数据的逻辑存储结构，带来了前端与数据的不独立，而且会造成数据冗余，有数据不一致的可能；还有并发问题、备份问题</p>
<h3 id="数据库三层结构"><a class="header-anchor" href="#数据库三层结构">¶</a>数据库三层结构</h3>
<h4 id="物理层"><a class="header-anchor" href="#物理层">¶</a>物理层</h4>
<p>描述物理存储结构（物理模式）</p>
<blockquote>
<p>内模式</p>
</blockquote>
<h4 id="逻辑层"><a class="header-anchor" href="#逻辑层">¶</a>逻辑层</h4>
<p>描述逻辑存储结构以及之间的关系（概念模式）</p>
<h4 id="视图层（View-level）"><a class="header-anchor" href="#视图层（View-level）">¶</a>视图层（View level）</h4>
<p>面向某一类用户的逻辑信息</p>
<ul>
<li>外模式可能有多个，全部综合起来构成的整体就是数据库的逻辑模式</li>
</ul>
<blockquote>
<p>外模式</p>
</blockquote>
<p>三层模式需要在之间建立映射关系（两级Mapping），形成了数据的独立性</p>
<h3 id="数据库的独立性"><a class="header-anchor" href="#数据库的独立性">¶</a>数据库的独立性</h3>
<h4 id="物理数据的独立性（完备）"><a class="header-anchor" href="#物理数据的独立性（完备）">¶</a>物理数据的独立性（完备）</h4>
<p>面对物理数据的改变，前端操作不需要进行更改</p>
<h4 id="逻辑数据独立性（不完备）"><a class="header-anchor" href="#逻辑数据独立性（不完备）">¶</a>逻辑数据独立性（不完备）</h4>
<p>逻辑方式的改变，前端应用<strong>不一定</strong>需要进行更改</p>
<p>只需要改视图与逻辑模式之间的映射（映像）</p>
<p>如果说**模式（Schema）<strong>是数据的结构，那么</strong>实例（Instance）**就是某一个时候数据库包含的内容</p>
<p>实例是相对来说比较动态的</p>
<h3 id="数据模型"><a class="header-anchor" href="#数据模型">¶</a>数据模型</h3>
<h4 id="数据结构"><a class="header-anchor" href="#数据结构">¶</a>数据结构</h4>
<ul>
<li>基于对象的模型
<ul>
<li>实体关系模型</li>
<li>面向对象模型</li>
</ul>
</li>
<li>基于记录的模型
<ul>
<li>层次数据模型</li>
<li>网状数据模型</li>
<li>关系数据模型</li>
</ul>
</li>
</ul>
<h3 id="数据库语言"><a class="header-anchor" href="#数据库语言">¶</a>数据库语言</h3>
<h4 id="数据定义语言（Data-Definition-Language，DDL）"><a class="header-anchor" href="#数据定义语言（Data-Definition-Language，DDL）">¶</a>数据定义语言（Data Definition Language，DDL）</h4>
<h4 id="数据操作语言（Data-Manipulation-Language，DML）"><a class="header-anchor" href="#数据操作语言（Data-Manipulation-Language，DML）">¶</a>数据操作语言（Data Manipulation Language，DML）</h4>
<p>query，insert，delete，update</p>
<p>SQL是非过程化的语言</p>
<p>此外，还有数据控制语言DCL（负责权限控制）</p>
<h3 id="数据库三层结构图"><a class="header-anchor" href="#数据库三层结构图">¶</a>数据库三层结构图</h3>
<img src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Mao/Exam/202309191315175.png" alt="image-20230919131549074" style="zoom: 33%;" />
<ul>
<li>data：数据</li>
<li>indices：索引</li>
<li>data dictionary：数据字典，存放的是元数据，也就是管理数据的数据（关键常驻内存）</li>
<li>query processor &amp; storage manager：DBMS</li>
</ul>
<h3 id="程序结构"><a class="header-anchor" href="#程序结构">¶</a>程序结构</h3>
<img src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Mao/Exam/202309191330036.png" alt="image-20230919133011963" style="zoom:50%;" />
<p>C/S：client/server结构，上图都是c/s结构</p>
<p>B/S：browser/server/database结构</p>
<h2 id="第二章-关系模型"><a class="header-anchor" href="#第二章-关系模型">¶</a>第二章 关系模型</h2>
<h3 id="关系模型的数据结构"><a class="header-anchor" href="#关系模型的数据结构">¶</a>关系模型的数据结构</h3>
<h4 id="关系-relation"><a class="header-anchor" href="#关系-relation">¶</a>关系 relation</h4>
<p>关系的定义：一系列域的笛卡尔积的子集</p>
<blockquote>
<p>域：取值范围，数学意义上可以是无限的</p>
<p>要注意笛卡尔积在数学意义上不满足交换律，位置信息是有含义的</p>
<p>关系在数学意义上可以是无限的</p>
</blockquote>
<p><strong>注意</strong>：在数据库中，为每个域引入了一个名称（也就是属性），此时该关系满足<strong>交换律</strong>；且关系在数据库中是各个域的笛卡尔积的<strong>有限的，有意义</strong>的子集</p>
<h4 id="模式-relation-schema"><a class="header-anchor" href="#模式-relation-schema">¶</a>模式 relation schema</h4>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>用</mtext><mi>R</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo><mtext>或</mtext><mi>R</mi><mo>=</mo><mo stretchy="false">(</mo><mo stretchy="false">)</mo><mtext>来表示关系模式，如</mtext><mi>s</mi><mi>t</mi><mi>u</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>S</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>m</mi><mi>a</mi><mo stretchy="false">(</mo><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo separator="true">,</mo><mi>i</mi><mi>d</mi><mo separator="true">,</mo><mi>s</mi><mi>e</mi><mi>x</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">用R()或R=()来表示关系模式，如studentSchema(name,id,sex)\\
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">用</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mclose">)</span><span class="mord cjk_fallback">或</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mclose">)</span><span class="mord cjk_fallback">来表示关系模式，如</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">u</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.05764em;">tS</span><span class="mord mathnormal">c</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">ma</span><span class="mopen">(</span><span class="mord mathnormal">nam</span><span class="mord mathnormal">e</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">se</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span><span class="mspace newline"></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mtext>是在关系模式</mtext><mi>R</mi><mtext>上的关系</mtext></mrow><annotation encoding="application/x-tex">r(R)是在关系模式R上的关系
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span><span class="mord cjk_fallback">是在关系模式</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord cjk_fallback">上的关系</span></span></span></span></span></p>
<h4 id="实例-relation-instance"><a class="header-anchor" href="#实例-relation-instance">¶</a>实例 relation instance</h4>
<p>可以用二维表来表示建立在一个关系上的关系实例</p>
<ul>
<li>
<p>表头即为属性</p>
</li>
<li>
<p>一行即为一条记录</p>
</li>
<li>
<p>行的顺序不需要严格要求（可以乱序）</p>
</li>
<li>
<p>列的顺序也不需要严格要求，因为关系满足交换律</p>
</li>
<li>
<p>属性都是原子的（atomic），不再可分 （关系数据库的第一范式）</p>
</li>
<li>
<p>属性名在同一张表中不能重复</p>
<blockquote>
<p>User.Database.Table.Attribute</p>
</blockquote>
</li>
<li>
<p>行不能重复（实际应用中可以选择重复）</p>
</li>
<li>
<p>不同的属性可来自相同取值域</p>
</li>
</ul>
<h2 id="关系模型的概念"><a class="header-anchor" href="#关系模型的概念">¶</a>关系模型的概念</h2>
<h4 id="空值-NULL"><a class="header-anchor" href="#空值-NULL">¶</a>空值 NULL</h4>
<p>在数据库中代表两个情况：</p>
<ul>
<li>数据不存在</li>
<li>还没有查到数据</li>
</ul>
<h4 id="超键-SuperKey"><a class="header-anchor" href="#超键-SuperKey">¶</a>超键 SuperKey</h4>
<p>R(U) is a relation schema , K ⊆ U;</p>
<p>K is a superkey(超键）for R:</p>
<p>​	for any r, no two distinct tuples have the same values on K. That is ,if t1 and t2 are in r and t1≠t2, then t1[k] ≠t2[k];</p>
<blockquote>
<p>就是可以唯一确定元组的属性集合</p>
</blockquote>
<h4 id="候选键-CandidateKey"><a class="header-anchor" href="#候选键-CandidateKey">¶</a>候选键 CandidateKey</h4>
<p>是可以<strong>唯一</strong>确定元组的<strong>最小</strong>超键</p>
<blockquote>
<p>也就是说，去掉候选键后就无法唯一确定元组了</p>
</blockquote>
<ul>
<li>唯一性</li>
<li>最小性</li>
</ul>
<h4 id="主键-PrimaryKey"><a class="header-anchor" href="#主键-PrimaryKey">¶</a>主键 PrimaryKey</h4>
<p>可能存在若干个候选键，可以选择其中一个作为主键</p>
<p>主键的选择一般根据前端应用需求或数据特点决定</p>
<p>主键的取值不能为空（NULL）</p>
<h4 id="外键-ForeignKey"><a class="header-anchor" href="#外键-ForeignKey">¶</a>外键 ForeignKey</h4>
<p>对两张表R1，R2，如果R1包含了R2的主键X，那么X被称为<strong>参照R2的外键</strong></p>
<ul>
<li>
<p>外键X在R1中</p>
</li>
<li>
<p>参照的是R2中的主键</p>
</li>
<li>
<p>外键的取值可以为NULL</p>
</li>
<li>
<p>外键的命名不一定需要和它参照的主键名相同，可以在系统中指定</p>
</li>
<li>
<p>外键可以定义在同一张表上，也就是参照自己这张表的主键</p>
</li>
</ul>
<h3 id="完整性约束-Integerty-Constraint"><a class="header-anchor" href="#完整性约束-Integerty-Constraint">¶</a>完整性约束 Integerty Constraint</h3>
<h4 id="实体完整性约束-Integrity-Constraint-of-Primary-Key"><a class="header-anchor" href="#实体完整性约束-Integrity-Constraint-of-Primary-Key">¶</a>实体完整性约束 Integrity Constraint of Primary Key</h4>
<p>主键不能为空，即它的属性都不能为空</p>
<blockquote>
<p>指的是主键的任意一列都不能为空</p>
</blockquote>
<h4 id="参照完整性约束-Referential-Integrity-Constraint"><a class="header-anchor" href="#参照完整性约束-Referential-Integrity-Constraint">¶</a>参照完整性约束 Referential Integrity Constraint</h4>
<p>外键取值要么为NULL，要么一定来源于参照的主键的值</p>
<blockquote>
<p>除此之外，用户也可以自定义完整性约束</p>
</blockquote>
<hr>
<h3 id="关系代数-Relational-Algebra"><a class="header-anchor" href="#关系代数-Relational-Algebra">¶</a>关系代数 Relational Algebra</h3>
<ul>
<li>选择 Select</li>
<li>投影 Project</li>
<li>并 Union</li>
<li>差 Set Difference</li>
<li>笛卡尔积 Cartesian product</li>
<li>更名 Rename</li>
</ul>
<p>真正的操作对象是表中的数据</p>
<h4 id="选择-Select"><a class="header-anchor" href="#选择-Select">¶</a>选择 Select</h4>
<p>一元操作，只对一张表操作，结果由满足条件的元组构成</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mi>p</mi></msub><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">σ_p(r)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">)</span></span></span></span>  	<em>p</em> is called the selection predicate(选择断言条件)</li>
<li>σ_p(r) = \{t | t ∈ r \and p(t)\}</li>
</ul>
<p>Eg.</p>
<p>从班级中选择出女同学</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mrow><mi>s</mi><mi>e</mi><mi>x</mi><mo>=</mo><mi>f</mi><mi>e</mi><mi>m</mi><mi>a</mi><mi>l</mi><mi>e</mi></mrow></msub><mo stretchy="false">(</mo><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">σ_{sex=female}(class)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">x</span><span class="mrel mtight">=</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">ss</span><span class="mclose">)</span></span></span></span></p>
<h4 id="投影-Project"><a class="header-anchor" href="#投影-Project">¶</a>投影 Project</h4>
<p>一元操作，只对一张表操作</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Π</mi><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>A</mi><mi>k</mi></msub><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Pi A_1,A_2,...,A_k(r)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Π</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">)</span></span></span></span></li>
</ul>
<p>A是属性</p>
<p>r是关系</p>
<p>选择出的是满足属性条件的列</p>
<blockquote>
<p>关系代数中，由于关系的记录不能重复，所以当结果存在相同元组时，结果只会存在一条</p>
<p>而SQL提供是否需要去除重复项的功能</p>
</blockquote>
<h4 id="集合-Union"><a class="header-anchor" href="#集合-Union">¶</a>集合 Union</h4>
<p>二元操作，对两张表操作</p>
<ul>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>∪</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">r\cup s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>∪</mo><mi>s</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>r</mi><mtext> </mtext><mi>o</mi><mi>r</mi><mtext> </mtext><mi>t</mi><mo>∈</mo><mi>s</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">r\cup s = \{t|t\in r \ or\  t\in s\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6542em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mspace"> </span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mclose">}</span></span></span></span></p>
</li>
<li>
<p>结果是两张表的合并</p>
</li>
<li>
<p>属性个数要一致</p>
<blockquote>
<p>属性名称不必一致，因为操作对象是数据</p>
</blockquote>
</li>
<li>
<p>域要相容</p>
</li>
</ul>
<blockquote>
<p>关系代数中，由于关系的记录不能重复，所以当结果存在相同元组时，结果只会存在一条</p>
<p>而SQL提供是否需要去除重复项的功能</p>
</blockquote>
<h4 id="差-Set"><a class="header-anchor" href="#差-Set">¶</a>差 Set</h4>
<p>二元操作</p>
<ul>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>−</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">r-s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>−</mo><mi>s</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>r</mi><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mi>t</mi><mo mathvariant="normal">∉</mo><mi>s</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">r -  s = \{t|t\in r \ and\  t\notin s\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace"> </span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mspace"> </span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mord"><span class="mrel">∈</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.0556em;"></span></span></span><span class="fix"></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mclose">}</span></span></span></span></p>
</li>
<li>
<p>属性个数要一致</p>
<blockquote>
<p>属性名称不必一致，因为操作对象是数据</p>
</blockquote>
</li>
<li>
<p>域要相容</p>
</li>
</ul>
<blockquote>
<p>区分不等于操作&lt;&gt;，不等于操作只会筛选出不等于的数据</p>
<p>（一个人同时选了01，02两门课，不等于01的操作还是会把这个人选择到）</p>
<p>而差操作可以实现选出没有选择01的人，此时上文这个人将不会被选择到</p>
</blockquote>
<h4 id="笛卡尔积-Cartesian-Product"><a class="header-anchor" href="#笛卡尔积-Cartesian-Product">¶</a>笛卡尔积 Cartesian-Product</h4>
<ul>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>×</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">r \times s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>×</mo><mi>s</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi>q</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>r</mi><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mi>q</mi><mo>∈</mo><mi>s</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">r \times  s = \{tq|t\in r \ and\  q\in s\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.03588em;">tq</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace"> </span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mclose">}</span></span></span></span></p>
</li>
<li>
<p>任意组合，m条*n条记录，a+b个属性（名字相同也不去重）</p>
</li>
<li>
<p>无要求</p>
</li>
</ul>
<h4 id="更名-Rename"><a class="header-anchor" href="#更名-Rename">¶</a>更名 Rename</h4>
<p>可以返回一个属性重命名的表达式</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ρ</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rho _x(E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span></li>
</ul>
<h3 id="附加操作"><a class="header-anchor" href="#附加操作">¶</a>附加操作</h3>
<h4 id="交-Set-Intersection"><a class="header-anchor" href="#交-Set-Intersection">¶</a>交 Set-Intersection</h4>
<p>二元操作，对两张表操作</p>
<ul>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>∩</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">r\cap s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>∩</mo><mi>s</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>r</mi><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mi>t</mi><mo>∈</mo><mi>s</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">r\cap s = \{t|t\in r \ and\  t\in s\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace"> </span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mspace"> </span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mclose">}</span></span></span></span></p>
</li>
<li>
<p>结果是两张表的公共部分</p>
</li>
<li>
<p>属性个数要一致</p>
<blockquote>
<p>属性名称不必一致，因为操作对象是数据</p>
</blockquote>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>∩</mo><mi>s</mi><mo>=</mo><mi>r</mi><mo>−</mo><mo stretchy="false">(</mo><mi>r</mi><mo>−</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r\cap s = r-(r-s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></p>
</li>
</ul>
<h4 id="连接-Join"><a class="header-anchor" href="#连接-Join">¶</a>连接 Join</h4>
<p>有条件的笛卡尔积</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><msub><mo>⋈</mo><mrow><mi>A</mi><mi>ϑ</mi><mi>B</mi></mrow></msub><mi>s</mi></mrow><annotation encoding="application/x-tex">r\Join _{A\vartheta B}s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.655em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">⋈</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">ϑB</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><msub><mo>⋈</mo><mrow><mi>A</mi><mi>ϑ</mi><mi>B</mi></mrow></msub><mi>s</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi>q</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>r</mi><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mi>q</mi><mo>∈</mo><mi>s</mi><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mtext> </mtext><mi>ϑ</mi><mtext> </mtext><mi>t</mi><mo stretchy="false">[</mo><mi>B</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">r\Join _{A\vartheta B} s=\{tq|t\in r \ and\  q\in s\ and\ (t[A]\ \vartheta \ t[B])\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.655em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">⋈</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">ϑB</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.03588em;">tq</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace"> </span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mspace"> </span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mclose">]</span><span class="mspace"> </span><span class="mord mathnormal">ϑ</span><span class="mspace"> </span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">])}</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mrow><mi>A</mi><mi>ϑ</mi><mi>B</mi></mrow></msub><mo stretchy="false">(</mo><mi>r</mi><mo>×</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">σ_{A\vartheta B}(r\times s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">ϑB</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϑ</mi><mo>∈</mo><mo stretchy="false">{</mo><mo>=</mo><mo separator="true">,</mo><mo mathvariant="normal">≠</mo><mo separator="true">,</mo><mo>≥</mo><mo separator="true">,</mo><mo>≤</mo><mo separator="true">,</mo><mo>&gt;</mo><mo separator="true">,</mo><mo>&lt;</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\vartheta\in\{=,\neq,\ge,\le,&gt;,&lt;\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">ϑ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.1944em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.1944em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mclose">}</span></span></span></span></li>
</ul>
<h4 id="自然连接-Natural-Join"><a class="header-anchor" href="#自然连接-Natural-Join">¶</a>自然连接 Natural-Join</h4>
<p>也叫内连接</p>
<ul>
<li>
<p>无需自己定义条件的自然连接，自然认为条件是均有的属性</p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>⋈</mo><mi>s</mi><mo>=</mo><msub><mi mathvariant="normal">Π</mi><mrow><mi>A</mi><mi>t</mi><mi>t</mi><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo><mo>∪</mo><mo stretchy="false">(</mo><mi>A</mi><mi>t</mi><mi>t</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>−</mo><mo stretchy="false">{</mo><mi>B</mi><mo stretchy="false">}</mo><mo stretchy="false">)</mo></mrow></msub><msub><mi>σ</mi><mrow><mi>r</mi><mi mathvariant="normal">.</mi><mi>B</mi><mo>=</mo><mi>s</mi><mi mathvariant="normal">.</mi><mi>B</mi></mrow></msub><mo stretchy="false">(</mo><mi>r</mi><mo>×</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r\Join s = \Pi _{Att(r)\cup(Att(s)-\{B\})}\sigma_{r.B=s.B}(r\times s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.51em;vertical-align:-0.005em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight">tt</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mclose mtight">)</span><span class="mbin mtight">∪</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight">tt</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">s</span><span class="mclose mtight">)</span><span class="mbin mtight">−</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="mclose mtight">})</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mtight">.</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="mrel mtight">=</span><span class="mord mathnormal mtight">s</span><span class="mord mtight">.</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></p>
</li>
<li>
<p>B是r和s均有的属性</p>
</li>
</ul>
<h4 id="除法-Division"><a class="header-anchor" href="#除法-Division">¶</a>除法 Division</h4>
<p>它不讲我不学，快乐北邮每一天</p>
<h4 id="赋值操作-Alignment"><a class="header-anchor" href="#赋值操作-Alignment">¶</a>赋值操作 Alignment</h4>
<p>就是赋值</p>
<h4 id="外连接-Outer-Join"><a class="header-anchor" href="#外连接-Outer-Join">¶</a>外连接 Outer Join</h4>
<p>其实就是内连接，但是会将没有连接的行也一样放入结果中返回，没有连接上的记录值用<code>null</code>代替</p>
<ul>
<li>⟕ 左外连接，会将左边表没有连接的行也一样放入结果中返回</li>
<li>⟖右外连接，会将右边表没有连接的行也一样放入结果中返回</li>
<li>⟗全外连接，会将左、右表没有连接的行放入结果中返回</li>
</ul>
<h4 id="空值-NULL-v2"><a class="header-anchor" href="#空值-NULL-v2">¶</a>空值 NULL</h4>
<p>任何含有NULL的代数表达式的结果都是NULL</p>
<ul>
<li>
<p>Comparisons with null values return the special truth value: <em>unknown</em></p>
</li>
<li>
<p>Three-valued logic using the truth value <em>unknown</em>:</p>
</li>
<li>
<ul>
<li>OR: (<em>unknown</em> <strong>or</strong> <em>true</em>)     = <em>true</em>,<br>
(<em>unknown</em> <strong>or</strong> <em>false</em>)    = *unknown<br>
(*unknown <strong>or</strong> <em>unknown) = unknown</em></li>
<li>AND:  <em>(true</em> <strong>and</strong> <em>unknown)     = unknown,<br>
(false</em> <strong>and</strong> <em>unknown)    = false,<br>
(unknown</em> <strong>and</strong> <em>unknown) = unknown</em></li>
<li>NOT*: (not* <em>unknown) = unknown</em></li>
</ul>
</li>
<li>
<p><strong>Result of select predicate is treated as false if it evaluates to unknown</strong></p>
</li>
</ul>
<hr>
<h3 id="数据库的调整操作"><a class="header-anchor" href="#数据库的调整操作">¶</a>数据库的调整操作</h3>
<h4 id="删除-Deletion"><a class="header-anchor" href="#删除-Deletion">¶</a>删除 Deletion</h4>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo>←</mo><mi>r</mi><mo>−</mo><mi>E</mi><mspace linebreak="newline"></mspace><mi>r</mi><mo>:</mo><mtext>关系</mtext><mspace linebreak="newline"></mspace><mi>E</mi><mo>:</mo><mtext>关系代数</mtext></mrow><annotation encoding="application/x-tex">r \leftarrow r - E\\
r:关系\\
E:关系代数
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">关系</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">关系代数</span></span></span></span></span></p>
<h4 id="插入-Insertion"><a class="header-anchor" href="#插入-Insertion">¶</a>插入 Insertion</h4>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo>←</mo><mi>r</mi><mo>∪</mo><mi>E</mi><mspace linebreak="newline"></mspace><mi>r</mi><mo>:</mo><mtext>关系</mtext><mspace linebreak="newline"></mspace><mi>E</mi><mo>:</mo><mtext>关系代数</mtext></mrow><annotation encoding="application/x-tex">r \leftarrow r \cup E\\
r:关系\\
E:关系代数
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5556em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">关系</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">关系代数</span></span></span></span></span></p>
<h4 id="更新-Updating"><a class="header-anchor" href="#更新-Updating">¶</a>更新 Updating</h4>
<p>更新表中对应属性的值</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo>←</mo><msub><mi mathvariant="normal">Π</mi><mrow><msub><mi>F</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>F</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>F</mi><mi>i</mi></msub></mrow></msub><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>r</mi><mo>:</mo><mtext>关系</mtext><mspace linebreak="newline"></mspace><mi>E</mi><mo>:</mo><mtext>关系代数</mtext></mrow><annotation encoding="application/x-tex">r \leftarrow \Pi_{F_1,F_2,..,F_i}(r)\\
r:关系\\
E:关系代数
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight">..</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">关系</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">关系代数</span></span></span></span></span></p>
<p><img src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Mao/Exam/202312241553687.png" alt="image-20231224155321877"></p>
<hr>
<h2 id="第三-四章-SQL语句"><a class="header-anchor" href="#第三-四章-SQL语句">¶</a>第三-四章 SQL语句</h2>
<h3 id="建表"><a class="header-anchor" href="#建表">¶</a>建表</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> R (</span><br><span class="line">  id <span class="type">int</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">  <span class="keyword">day</span> <span class="type">date</span> <span class="keyword">default</span> <span class="string">&#x27;1970-01-01&#x27;</span>,</span><br><span class="line">  sex <span class="type">varchar</span>(<span class="number">6</span>),</span><br><span class="line">  <span class="keyword">primary</span> key(id),</span><br><span class="line">  <span class="keyword">foreign</span> key(<span class="keyword">day</span>) <span class="keyword">references</span> T</span><br><span class="line">  					<span class="keyword">on</span> <span class="keyword">delete</span> cascade</span><br><span class="line">  					<span class="keyword">on</span> <span class="keyword">update</span> cascade,</span><br><span class="line">  <span class="keyword">check</span> (sex <span class="keyword">in</span>(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="删表"><a class="header-anchor" href="#删表">¶</a>删表</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> R</span><br></pre></td></tr></table></figure>
<h3 id="添加属性"><a class="header-anchor" href="#添加属性">¶</a>添加属性</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> R <span class="keyword">add</span> A TYPE</span><br><span class="line">eg. <span class="keyword">alter</span> <span class="keyword">table</span> R <span class="keyword">add</span> sex <span class="type">varchar</span>(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<h3 id="选择"><a class="header-anchor" href="#选择">¶</a>选择</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> [<span class="keyword">distinct</span>] name,id </span><br><span class="line"><span class="keyword">from</span> R</span><br><span class="line"><span class="keyword">where</span> id <span class="keyword">between</span> <span class="number">5000</span> <span class="keyword">and</span> <span class="number">7500</span></span><br><span class="line"><span class="keyword">and</span></span><br><span class="line">name <span class="keyword">like</span> <span class="string">&#x27;% Mike %&#x27;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>%:任意字符匹配</p>
<p>_:单个字符匹配</p>
<p>[]：匹配括号中的任意字符</p>
</blockquote>
<h3 id="更名"><a class="header-anchor" href="#更名">¶</a>更名</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name</span><br><span class="line"><span class="keyword">from</span> R <span class="keyword">as</span> A, R <span class="keyword">as</span> B</span><br><span class="line"><span class="keyword">where</span> A.salary <span class="operator">&gt;</span> B.salary</span><br></pre></td></tr></table></figure>
<h3 id="排序"><a class="header-anchor" href="#排序">¶</a>排序</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id</span><br><span class="line"><span class="keyword">from</span> R</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> id <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>asc:升序</p>
<p>desc：降序</p>
</blockquote>
<h3 id="集合操作-并、交、差"><a class="header-anchor" href="#集合操作-并、交、差">¶</a>集合操作 - 并、交、差</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">select</span> id <span class="keyword">from</span> A) </span><br><span class="line"><span class="keyword">union</span></span><br><span class="line">(<span class="keyword">select</span> id <span class="keyword">from</span> B)</span><br><span class="line"></span><br><span class="line">(<span class="keyword">select</span> id <span class="keyword">from</span> A)</span><br><span class="line"><span class="keyword">intersect</span></span><br><span class="line">(<span class="keyword">select</span> id <span class="keyword">from</span> B)</span><br><span class="line"></span><br><span class="line">(<span class="keyword">select</span> id <span class="keyword">from</span> A)</span><br><span class="line"><span class="keyword">except</span></span><br><span class="line">(<span class="keyword">select</span> id <span class="keyword">from</span> B)</span><br></pre></td></tr></table></figure>
<h3 id="运算操作-avg、min、max、count"><a class="header-anchor" href="#运算操作-avg、min、max、count">¶</a>运算操作 avg、min、max、count</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(score)</span><br><span class="line"><span class="keyword">from</span> student</span><br></pre></td></tr></table></figure>
<blockquote>
<p>全部的运算操作中，只有count * 不忽略null值</p>
</blockquote>
<h3 id="分组-group-by"><a class="header-anchor" href="#分组-group-by">¶</a>分组 group by</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id,<span class="built_in">avg</span>(salary)</span><br><span class="line"><span class="keyword">from</span> R</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sex</span><br><span class="line"><span class="keyword">having</span> id <span class="operator">&gt;</span> <span class="number">5000</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：使用group by后，select出的只能是having的属性或运算后的属性</p>
</blockquote>
<blockquote>
<p>having子句中的运算操作在组形成之后使用，而where子句中的运算操作在组形成之前使用</p>
</blockquote>
<h3 id="子语句"><a class="header-anchor" href="#子语句">¶</a>子语句</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name</span><br><span class="line"><span class="keyword">from</span> A</span><br><span class="line"><span class="keyword">where</span> A.id <span class="keyword">in</span> (</span><br><span class="line">  <span class="keyword">select</span> id <span class="keyword">from</span> B</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="some-all"><a class="header-anchor" href="#some-all">¶</a>some all</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name</span><br><span class="line"><span class="keyword">from</span> A</span><br><span class="line"><span class="keyword">where</span> A.id <span class="operator">&gt;</span> <span class="keyword">some</span> <span class="operator">/</span> <span class="keyword">all</span> (</span><br><span class="line">  <span class="keyword">select</span> id <span class="keyword">from</span> B</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="Exists"><a class="header-anchor" href="#Exists">¶</a>Exists</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name</span><br><span class="line"><span class="keyword">from</span> A</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">exists</span> (</span><br><span class="line">  <span class="keyword">select</span> name <span class="keyword">from</span> B</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果子句的结果不为空，exists会返回true</p>
</blockquote>
<h3 id="unique"><a class="header-anchor" href="#unique">¶</a>unique</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name</span><br><span class="line"><span class="keyword">from</span> A</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">unique</span> (</span><br><span class="line">  <span class="keyword">select</span> name <span class="keyword">from</span> B</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果子句的结果没有冲突，unique会返回true</p>
</blockquote>
<h3 id="with"><a class="header-anchor" href="#with">¶</a>with</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> get_salary(<span class="keyword">value</span>) <span class="keyword">as</span> (</span><br><span class="line">  <span class="keyword">select</span> salary</span><br><span class="line">  <span class="keyword">from</span> R</span><br><span class="line">  <span class="keyword">where</span> <span class="keyword">value</span> <span class="operator">&gt;</span> <span class="number">5000</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">select</span> name</span><br><span class="line"><span class="keyword">from</span> B,get_salary</span><br><span class="line"><span class="keyword">where</span> get_salary.value <span class="operator">=</span> B.salary</span><br></pre></td></tr></table></figure>
<blockquote>
<p>with提供的实际上是函数的功能，对外暴露的属性放置在括号中。</p>
</blockquote>
<h3 id="删除记录-delete"><a class="header-anchor" href="#删除记录-delete">¶</a>删除记录 delete</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> R</span><br><span class="line"><span class="keyword">where</span> R.name <span class="operator">=</span><span class="operator">=</span> &quot;Mike&quot;</span><br></pre></td></tr></table></figure>
<h3 id="插入记录-insert"><a class="header-anchor" href="#插入记录-insert">¶</a>插入记录 insert</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> R</span><br><span class="line"><span class="keyword">values</span>(&quot;Mike&quot;,<span class="number">114514</span>)</span><br></pre></td></tr></table></figure>
<p>Add all instructors to the student relation with tot_creds set to 0</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student</span><br><span class="line"><span class="keyword">select</span> ID,name,dept_name,<span class="number">0</span></span><br><span class="line"><span class="keyword">from</span> instructor</span><br></pre></td></tr></table></figure>
<h3 id="更新记录"><a class="header-anchor" href="#更新记录">¶</a>更新记录</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> R </span><br><span class="line"><span class="keyword">set</span> salary <span class="operator">=</span> salary <span class="operator">*</span> <span class="number">1.03</span></span><br><span class="line"><span class="keyword">where</span> salary <span class="operator">&gt;</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure>
<h4 id="case-when"><a class="header-anchor" href="#case-when">¶</a>case when</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> R</span><br><span class="line"><span class="keyword">set</span> salary <span class="operator">=</span> </span><br><span class="line">	<span class="keyword">case</span> <span class="keyword">when</span> salary <span class="operator">&lt;=</span> <span class="number">1000</span> </span><br><span class="line">			 <span class="keyword">then</span> salary <span class="operator">*</span> <span class="number">1.05</span></span><br><span class="line">			 <span class="keyword">else</span> salary <span class="operator">*</span> <span class="number">1.03</span></span><br><span class="line">	<span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="索引-index"><a class="header-anchor" href="#索引-index">¶</a>索引 index</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> [<span class="keyword">unique</span>] index R_index <span class="keyword">on</span> R(name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> index R_index</span><br></pre></td></tr></table></figure>
<h3 id="连接-join"><a class="header-anchor" href="#连接-join">¶</a>连接 join</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> student </span><br><span class="line"><span class="keyword">join</span> takes</span><br><span class="line"><span class="keyword">on</span> student.id <span class="operator">=</span> takes.stu_id</span><br></pre></td></tr></table></figure>
<h3 id="自然连接-natural-join"><a class="header-anchor" href="#自然连接-natural-join">¶</a>自然连接 natural join</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">natural</span> <span class="keyword">join</span> takes</span><br></pre></td></tr></table></figure>
<h4 id="using"><a class="header-anchor" href="#using">¶</a>using</h4>
<p>要指定自然连接的依据，可以使用using</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">natural</span> <span class="keyword">join</span> takes </span><br><span class="line"><span class="keyword">using</span>(id)</span><br></pre></td></tr></table></figure>
<h4 id="inner-join"><a class="header-anchor" href="#inner-join">¶</a>inner join</h4>
<p>内连接，不会保留含有属性值为null的记录</p>
<h4 id="left-right-full-outer-join"><a class="header-anchor" href="#left-right-full-outer-join">¶</a>left/right/full outer join</h4>
<p>外连接</p>
<p>以左外连接为例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> takes</span><br><span class="line"><span class="keyword">on</span> student.id <span class="operator">=</span> takes.id</span><br></pre></td></tr></table></figure>
<p>这样得到的记录中，会存在student的属性有记录而takes的属性为空的记录</p>
<p><img src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Mao/Exam/202312241948756.png" alt="image-20231224194828667"></p>
<h3 id="视图-views"><a class="header-anchor" href="#视图-views">¶</a>视图 views</h3>
<h4 id="创建视图"><a class="header-anchor" href="#创建视图">¶</a>创建视图</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> stuView(ID,name,avg_grade) <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> ID,name,<span class="built_in">avg</span>(grade)</span><br><span class="line"><span class="keyword">from</span> student</span><br></pre></td></tr></table></figure>
<h4 id="更新视图"><a class="header-anchor" href="#更新视图">¶</a>更新视图</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stuView <span class="keyword">values</span></span><br><span class="line">(<span class="number">114514</span>,<span class="string">&#x27;Mike&#x27;</span>,<span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<p>此时，等同于对原表使用insert，但是相对于原表，视图中没有的属性将会表现为null，如(114514,‘Mike’,100,null)</p>
<h3 id="权限"><a class="header-anchor" href="#权限">¶</a>权限</h3>
<h4 id="授予权限"><a class="header-anchor" href="#授予权限">¶</a>授予权限</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> R <span class="keyword">to</span> U1,U2</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span>,<span class="keyword">insert</span>,<span class="keyword">update</span>,<span class="keyword">delete</span>,read,index,resources,alteration,<span class="keyword">drop</span></span><br></pre></td></tr></table></figure>
<h4 id="收回权限"><a class="header-anchor" href="#收回权限">¶</a>收回权限</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">revoke</span> <span class="keyword">select</span> <span class="keyword">on</span> R <span class="keyword">from</span> U1,U2</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果有多个权限授予源，授予多次相同的权限，只收回一次权限并不会一次性去掉全部相同的权限</p>
</blockquote>
<h3 id="角色"><a class="header-anchor" href="#角色">¶</a>角色</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> role instructor</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> R <span class="keyword">to</span> instructor</span><br><span class="line"></span><br><span class="line"><span class="keyword">grant</span> teacher <span class="keyword">to</span> instructor</span><br></pre></td></tr></table></figure>
<h3 id="事件"><a class="header-anchor" href="#事件">¶</a>事件</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> credits_earned after <span class="keyword">update</span> <span class="keyword">of</span> takes <span class="keyword">on</span> (grade)</span><br><span class="line"><span class="keyword">referencing</span> <span class="keyword">new</span> <span class="type">row</span> <span class="keyword">as</span> nrow</span><br><span class="line"><span class="keyword">referencing</span> <span class="keyword">old</span> <span class="type">row</span> <span class="keyword">as</span> orow</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">when</span> nrow.grade <span class="operator">&lt;&gt;</span> ’F’ <span class="keyword">and</span> nrow.grade <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">and</span> (orow.grade <span class="operator">=</span> ’F’ <span class="keyword">or</span> orow.grade <span class="keyword">is</span> <span class="keyword">null</span>)</span><br><span class="line"><span class="keyword">begin</span> <span class="keyword">atomic</span></span><br><span class="line">	<span class="keyword">update</span> student</span><br><span class="line">	<span class="keyword">set</span> tot_cred<span class="operator">=</span> tot_cred <span class="operator">+</span> (</span><br><span class="line">  	<span class="keyword">select</span> credits</span><br><span class="line">  	<span class="keyword">from</span> course</span><br><span class="line">  	<span class="keyword">where</span> course.course_id<span class="operator">=</span> nrow.course_id</span><br><span class="line">)</span><br><span class="line">	<span class="keyword">where</span> student.id <span class="operator">=</span> nrow.id;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://ichirinko.top">Ichirinko</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://ichirinko.top/2023/12/28/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/">https://ichirinko.top/2023/12/28/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://ichirinko.top" target="_blank">Ichirinko's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/">数据库系统原理</a></div><div class="post_share"><div class="social-share" data-image="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Opera_System/202312300009566.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/12/29/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/"><img class="prev-cover" src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Opera_System/202312300009567.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">数据库系统原理 期末复习（二）</div></div></a></div><div class="next-post pull-right"><a href="/2023/11/05/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%EF%BC%88%E4%B8%89%EF%BC%89%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%209.26-10.31/"><img class="next-cover" src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Opera_System/202311031320573.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">编译原理 期中复习 语法分析</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/12/29/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/" title="数据库系统原理 期末复习（二）"><img class="cover" src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Opera_System/202312300009567.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-29</div><div class="title">数据库系统原理 期末复习（二）</div></div></a></div><div><a href="/2023/12/30/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89/" title="数据库系统原理 期末复习（三）"><img class="cover" src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Opera_System/202312300009568.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-30</div><div class="title">数据库系统原理 期末复习（三）</div></div></a></div><div><a href="/2023/12/31/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89/" title="数据库系统原理 期末复习（四）"><img class="cover" src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Opera_System/202312300009570.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-31</div><div class="title">数据库系统原理 期末复习（四）</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/img/202209122110798.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Ichirinko</div><div class="author-info__description">找点乐子做</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">32</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ZYL-DF" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">2024,新年快乐!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0"><span class="toc-text">第一章</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%AA%E8%AE%BA"><span class="toc-text">绪论</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%B1%82%E7%BB%93%E6%9E%84"><span class="toc-text">数据库三层结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-text">物理层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%B1%82"><span class="toc-text">逻辑层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E5%B1%82%EF%BC%88View-level%EF%BC%89"><span class="toc-text">视图层（View level）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E7%8B%AC%E7%AB%8B%E6%80%A7"><span class="toc-text">数据库的独立性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E6%95%B0%E6%8D%AE%E7%9A%84%E7%8B%AC%E7%AB%8B%E6%80%A7%EF%BC%88%E5%AE%8C%E5%A4%87%EF%BC%89"><span class="toc-text">物理数据的独立性（完备）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E6%95%B0%E6%8D%AE%E7%8B%AC%E7%AB%8B%E6%80%A7%EF%BC%88%E4%B8%8D%E5%AE%8C%E5%A4%87%EF%BC%89"><span class="toc-text">逻辑数据独立性（不完备）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-text">数据模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-text">数据结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%AD%E8%A8%80"><span class="toc-text">数据库语言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%EF%BC%88Data-Definition-Language%EF%BC%8CDDL%EF%BC%89"><span class="toc-text">数据定义语言（Data Definition Language，DDL）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80%EF%BC%88Data-Manipulation-Language%EF%BC%8CDML%EF%BC%89"><span class="toc-text">数据操作语言（Data Manipulation Language，DML）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%B1%82%E7%BB%93%E6%9E%84%E5%9B%BE"><span class="toc-text">数据库三层结构图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84"><span class="toc-text">程序结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B"><span class="toc-text">第二章 关系模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-text">关系模型的数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB-relation"><span class="toc-text">关系 relation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F-relation-schema"><span class="toc-text">模式 relation schema</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-relation-instance"><span class="toc-text">实例 relation instance</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">关系模型的概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A9%BA%E5%80%BC-NULL"><span class="toc-text">空值 NULL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B6%85%E9%94%AE-SuperKey"><span class="toc-text">超键 SuperKey</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%80%99%E9%80%89%E9%94%AE-CandidateKey"><span class="toc-text">候选键 CandidateKey</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE-PrimaryKey"><span class="toc-text">主键 PrimaryKey</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E9%94%AE-ForeignKey"><span class="toc-text">外键 ForeignKey</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F-Integerty-Constraint"><span class="toc-text">完整性约束 Integerty Constraint</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F-Integrity-Constraint-of-Primary-Key"><span class="toc-text">实体完整性约束 Integrity Constraint of Primary Key</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E7%85%A7%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F-Referential-Integrity-Constraint"><span class="toc-text">参照完整性约束 Referential Integrity Constraint</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E4%BB%A3%E6%95%B0-Relational-Algebra"><span class="toc-text">关系代数 Relational Algebra</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9-Select"><span class="toc-text">选择 Select</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%95%E5%BD%B1-Project"><span class="toc-text">投影 Project</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E5%90%88-Union"><span class="toc-text">集合 Union</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%AE-Set"><span class="toc-text">差 Set</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF-Cartesian-Product"><span class="toc-text">笛卡尔积 Cartesian-Product</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E5%90%8D-Rename"><span class="toc-text">更名 Rename</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%84%E5%8A%A0%E6%93%8D%E4%BD%9C"><span class="toc-text">附加操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4-Set-Intersection"><span class="toc-text">交 Set-Intersection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5-Join"><span class="toc-text">连接 Join</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5-Natural-Join"><span class="toc-text">自然连接 Natural-Join</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%A4%E6%B3%95-Division"><span class="toc-text">除法 Division</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B5%8B%E5%80%BC%E6%93%8D%E4%BD%9C-Alignment"><span class="toc-text">赋值操作 Alignment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5-Outer-Join"><span class="toc-text">外连接 Outer Join</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A9%BA%E5%80%BC-NULL-v2"><span class="toc-text">空值 NULL</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%B0%83%E6%95%B4%E6%93%8D%E4%BD%9C"><span class="toc-text">数据库的调整操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-Deletion"><span class="toc-text">删除 Deletion</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E5%85%A5-Insertion"><span class="toc-text">插入 Insertion</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0-Updating"><span class="toc-text">更新 Updating</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89-%E5%9B%9B%E7%AB%A0-SQL%E8%AF%AD%E5%8F%A5"><span class="toc-text">第三-四章 SQL语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E8%A1%A8"><span class="toc-text">建表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E8%A1%A8"><span class="toc-text">删表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7"><span class="toc-text">添加属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%89%E6%8B%A9"><span class="toc-text">选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E5%90%8D"><span class="toc-text">更名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-text">排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C-%E5%B9%B6%E3%80%81%E4%BA%A4%E3%80%81%E5%B7%AE"><span class="toc-text">集合操作 - 并、交、差</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E6%93%8D%E4%BD%9C-avg%E3%80%81min%E3%80%81max%E3%80%81count"><span class="toc-text">运算操作 avg、min、max、count</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84-group-by"><span class="toc-text">分组 group by</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E8%AF%AD%E5%8F%A5"><span class="toc-text">子语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#some-all"><span class="toc-text">some all</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Exists"><span class="toc-text">Exists</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unique"><span class="toc-text">unique</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#with"><span class="toc-text">with</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%AE%B0%E5%BD%95-delete"><span class="toc-text">删除记录 delete</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E8%AE%B0%E5%BD%95-insert"><span class="toc-text">插入记录 insert</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E8%AE%B0%E5%BD%95"><span class="toc-text">更新记录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#case-when"><span class="toc-text">case when</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95-index"><span class="toc-text">索引 index</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5-join"><span class="toc-text">连接 join</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5-natural-join"><span class="toc-text">自然连接 natural join</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#using"><span class="toc-text">using</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#inner-join"><span class="toc-text">inner join</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#left-right-full-outer-join"><span class="toc-text">left&#x2F;right&#x2F;full outer join</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE-views"><span class="toc-text">视图 views</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="toc-text">创建视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E8%A7%86%E5%9B%BE"><span class="toc-text">更新视图</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90"><span class="toc-text">权限</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%88%E4%BA%88%E6%9D%83%E9%99%90"><span class="toc-text">授予权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E5%9B%9E%E6%9D%83%E9%99%90"><span class="toc-text">收回权限</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E8%89%B2"><span class="toc-text">角色</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6"><span class="toc-text">事件</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/12/31/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89/" title="数据库系统原理 期末复习（四）"><img src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Opera_System/202312300009570.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据库系统原理 期末复习（四）"/></a><div class="content"><a class="title" href="/2023/12/31/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89/" title="数据库系统原理 期末复习（四）">数据库系统原理 期末复习（四）</a><time datetime="2023-12-30T16:00:00.000Z" title="发表于 2023-12-31 00:00:00">2023-12-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/30/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89/" title="数据库系统原理 期末复习（三）"><img src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Opera_System/202312300009568.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据库系统原理 期末复习（三）"/></a><div class="content"><a class="title" href="/2023/12/30/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89/" title="数据库系统原理 期末复习（三）">数据库系统原理 期末复习（三）</a><time datetime="2023-12-29T16:00:00.000Z" title="发表于 2023-12-30 00:00:00">2023-12-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/29/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/" title="数据库系统原理 期末复习（二）"><img src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Opera_System/202312300009567.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据库系统原理 期末复习（二）"/></a><div class="content"><a class="title" href="/2023/12/29/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/" title="数据库系统原理 期末复习（二）">数据库系统原理 期末复习（二）</a><time datetime="2023-12-28T16:00:00.000Z" title="发表于 2023-12-29 00:00:00">2023-12-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/28/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/" title="数据库系统原理 期末复习（一）"><img src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Opera_System/202312300009566.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据库系统原理 期末复习（一）"/></a><div class="content"><a class="title" href="/2023/12/28/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%20%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/" title="数据库系统原理 期末复习（一）">数据库系统原理 期末复习（一）</a><time datetime="2023-12-27T16:00:00.000Z" title="发表于 2023-12-28 00:00:00">2023-12-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/05/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%EF%BC%88%E4%B8%89%EF%BC%89%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%209.26-10.31/" title="编译原理 期中复习 语法分析"><img src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/Opera_System/202311031320573.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="编译原理 期中复习 语法分析"/></a><div class="content"><a class="title" href="/2023/11/05/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%EF%BC%88%E4%B8%89%EF%BC%89%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%209.26-10.31/" title="编译原理 期中复习 语法分析">编译原理 期中复习 语法分析</a><time datetime="2023-11-04T16:00:00.000Z" title="发表于 2023-11-05 00:00:00">2023-11-05</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/ComputerNetwork/4/202310202339949.jpeg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Ichirinko</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/""><span>粤ICP备2023003597号</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html><div id="sakana-widget" style="position:fixed;bottom:10px;right:10px;"></div><script>function initSakanaWidget() {
new SakanaWidget().mount('#sakana-widget');
}</script><script async="" onload="initSakanaWidget()" src="https://cdn.jsdelivr.net/npm/sakana-widget@2.2.1/lib/sakana.min.js"></script>