---
title: 计算机组成原理 第三章
date: 2023.4.14
updated: 2023.4.14
tags: 
- 学习
- 计算机组成原理
categories: 
- 笔记
keywords:  
- 计算机组成原理
- 笔记
description: 支持王道考研谢谢喵~
toc: true
toc_number: false
katex: true
top_img: https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/CSAPP/1-6/202210200028800.png
cover: https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/PostCalendar/202304151150487.jpg
---

# 计组 第三讲 内部存储器 3.16+3.23

## 分类

### 存储介质

- 半导体存储器（MOS管）
- 磁表面存储器
- 光盘存储器



<br>

### 存取方式

- 随机存储器（半导体存储器RAM/ROM）
- 顺序存储器（磁带）
- 半顺序存储器（磁盘存储器）

<br>

### 存储内容可变性

- 只读存储器（ROM）
- 随机读写存储器（RAM）

上面两个都是半导体存储器



<br>

### 信息易失器

- 易失性存储器（断电后消失）RAM
- 非易失性存储器（断电后仍能保存）ROM

<br>

### 计算机系统中的作用

- 主存储器 - 半导体存储器

  > 能够被CPU直接访问，速度较快，用于保存系统当前运行所需的所有程序和数据

- 辅助存储器 - 磁盘、光盘存储器

  > 不能被CPU直接访问，速度较慢，用于保存所有的数据和程序

- 高速缓冲存储器（Cache）- 半导体存储器

  > 能够被CPU直接访问，速度快，用于保存系统中频繁使用的数据和程序
  >
  > SRAM适合，但是其他的RAM和ROM不好说

- 控制存储器（寄存器）

  > CPU内部的存储单元



<br>

## 存储器的分级结构

### 三级存储结构

缓存-贮存层次+主存-辅存层次



## 主存储器的技术指标

### 存储容量

指存储器能存放二进制代码的总数
$$
存储总量=存储单元个数\times 存储字长 \\
\\
存储总量=存储单元个数\times 存储字长/8\\单位为B（字节）
$$

#### EP

某机存储容量为$2K\times 16$，则所需地址线为**11**根，数据线位数为**16**根

> $$
> 2^{10}<2000<2^{11}
> $$

<br>

### 存储速度

- 存取时间

  > 读写时占用的时间

- 存取周期

  > 一次读写到下一次读写的时间

- 存取带宽



#### EP

存取周期为500ns，每个存取周期可访问16位，



<br>

## SRAM存储器

### 构成

#### 静态RAM（SRAM）

- 主要用于构成Cache
- 由MOS构成的双稳态触发器
- 访问速度快
- 断电就寄，功耗大，价格高

#### 动态RAM（DRAM）

- 由MOS构成的栅极电容
- 集成度高，功耗小，价格低
- 访问速度慢
- 断电后易流失电容造成数据丢失，要定期充电



### 基本的动态存储元排列

芯片封装后，有3种外部信号线

- 地址线：$2^n$个单元，对应有n根地址线
- 数据线：每个单元m位，对应有m根数据线
- 控制线：读写控制信号输入

<br>

### 基本SRAM存储器逻辑结构

#### 译码驱动方式

- 单译码

  > 被选单元由字段直接选定
  >
  > 适用于容量小的芯片

- 双译码



<br>

### 存储体

### 地址译码器

### 译码驱动器

### I/O电路

<br>

---

<br>

### 读写周期波形图

WE信号通常比CS信号有延迟

#### 读周期

- CPU发出有效的地址信号
- 译码电路延迟产生有效的片选信号
- 在读信号控制下，从存储单元中读出数据
- 各控制信号撤销（地址信号稍晚），数据维持一段时间

#### 读出时间

- 从地址有效到外部数据总线上的数据信息稳定需要的时间

#### 写周期

- CPU发出有效的地址信号，提供要写入的数据
- 译码电路延迟产生有效的片选信号
- 在写信号控制下，向存储单元中写入数据
- 各控制信号撤销（地址信号稍晚），数据维持一段时间

#### 写入时间

#### 写入周期时间



<br>

## DRAM存储器

### 读写周期

- 行地址RAS有效

- 列地址CAS有效

- WE高电平，读有效/低电平，写有效

- 数据Dout/Din有效

  > CAS要滞后于RAS
  >
  > RAS和CAS的正负电平的宽度也要做出规定

<br>

### 刷新

通过读出-再写入的方式恢复信息

刷新时无法进行外部读写

#### 类型

- 集中式刷新

  > 利用一段固定时间对所有行刷新
  >
  > 此时CPU无法读写，存在死区时间

- 分散式刷新

  > 将工作周期分为读写/刷新两部分
  >
  > 但是效率降低，系统变慢

- 异步式刷新

  > 在一个刷新周期内分散地刷新各个单元
  >
  > 不会产生明显停顿，也不会延长读取周期

<br>

---

<br>

## 存储器容量的扩充

<img src="https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/PostCalendar/202304151133207.JPG" alt="computerComposition_3_1" style="zoom:50%;" />

### 存储芯片与CPU的引脚

#### 存储芯片的外部引脚

- 数据总线：位数与存储单元字长相同，用于传送数据信息
- 地址总线：位数与存储单元个数为$2^n$关系，用于选择存储单元
- 读写信号/WE：决定当前对芯片的访问类型
- 片选信号/CS：决定当前芯片是否正在被访问



#### CPU与存储器连接的外部引脚

- 数据总线：位数与机器字长相同，用于传送数据信息
- 地址总线：位数与系统中可访问单元个数为$2^n$的关系，用于选择访问单元（**注意和上面的地址总线的n可能不一样**）
- 读写信号/WE：决定当前CPU的访问类型
- 访存允许信号/MREQ：决定是否允许CPU访问存储器；

<br>

#### 位拓展

存储单元数不变，每个单元的位数（字长）增加

存储芯片与CPU的引脚连接方法：

- 地址线：各芯片的地址线直接与CPU地址线连接
- 数据线：各芯片的数据线分别与CPU数据线的不同位连接
- 片选及读写线：各芯片的片选及读写信号直接与CPU的访存及读写信号连接



注意：CPU对该存储器的访问是对各位扩展芯片的同一单元的同时访问

<br>

![computerComposition_3_2](https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/PostCalendar/202304151134508.JPG)

<br>

#### 字拓展

字扩展：每个单元位数不变，总的单元个数增加

存储芯片与CPU的引脚连接方法：

- 地址线：各芯片的地址线与CPU的低位地址线直接连接
- 数据线：各芯片的数据线直接与CPU数据线连接
- 读写线：各芯片的读写信号直接与CPU的读写信号连接
- **片选信号：各芯片的片选信号由CPU的高位地址和访存信号产生**

注意：CPU对该存储器的访问是对某一字扩展芯片的一个单元的访问

<br>

![computerComposition_3_3](https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/PostCalendar/202304151134329.JPG)

<br>

#### 字位扩展

字位扩展：每个单元位数和总的单元个数都增加

扩展方法

- 先进行位扩展，形成满足位要求的存储芯片组
- 再使用存储芯片组进行字扩展



要求：能够计算出字位扩展所需的存储芯片的数目

例如：用L×K的芯片构成M×N的存储系统，所需芯片总数为$\frac{M}{L}×\frac{N}{K}$片。

<br>

![computerComposition_3_4](https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/PostCalendar/202304151134889.JPG)

![computerComposition_3_5](https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/PostCalendar/202304151135596.JPG)

![computerComposition_3_6](https://ichirinko-blog-img-1.oss-cn-shenzhen.aliyuncs.com/Pic_res/PostCalendar/202304151135389.JPG)

<br>

### 只读存储器

#### 掩模式ROM

定义：数据在芯片制造过程中写入，不能更改

优点：可靠性、集成度高，价格便宜

缺点：通用性差，不能改写内容

#### 一次编程ROM（PROM）

定义：用户第一次使用时写入确定内容

优点：用户可根据需要对ROM编程

缺点：只能写入一次，不能更改

#### 多次编程ROM

定义：可用紫外光照射（EPROM）或电擦除（E2PROM）多次改写其中内容

优点：通用性较好，可反复使用；

<br>

### 闪速存储器（FlashMemory）

一种高密度、非易失性的读/写半导体存储器，它突破了传统的存储器体系，改善了现有存储器的特性。

闪速存储器是在EPROM功能基础上，增加了电路的电擦除和重新编程能力,也叫快擦型存储器

目前流行的U盘（也称优盘、闪盘）即为闪速存储器的其中一种形式

闪速存储器的可擦写次数一般在1万次以上，也有人说有的U盘可多达100万次左右（无法核实）。

<br>

## 高速存储器

### 双端口存储器

双端口存储器采用**空间并行技术**

同一个存储体使用两组相互独立的读写控制线路，可并行操作

显卡上的存储器一般都是双端口存储器

读写特点：

- 无冲突读写
- 访问的存储单元不同，可并行读写存储体
- 有冲突读写
- 访问同一存储单元，可使用`/BUSY`信号控制读写优先顺序；
